(window.webpackJsonp=window.webpackJsonp||[]).push([[22,6,18],{419:function(t,e,r){"use strict";r.r(e);var n=r(57),component=Object(n.a)({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"border-0 card shadow"},[t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},420:function(t,e,r){var content=r(422);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(154).default)("08d58d36",content,!0,{sourceMap:!1})},421:function(t,e,r){"use strict";r(420)},422:function(t,e,r){var n=r(153)(!1);n.push([t.i,"@media print{.container>.row>.col[data-v-29e00fd0]{flex:1;max-width:100%;width:100%}}",""]),t.exports=n},423:function(t,e,r){"use strict";r.r(e);var n={props:{backLabel:{type:String,default:"What is TLL?"},backTo:{type:String,default:"/"},showBack:{type:Boolean,default:!1},title:{type:String,default:""}}},o=(r(421),r(57)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-md-10 col-lg-8 col-xl-7 mx-auto"},[r("Card",[t.showBack?r("div",{staticClass:"card-header d-print-none py-1"},[r("b-button",{staticClass:"border-0",attrs:{size:"sm",to:t.backTo,variant:"link"}},[r("i",{staticClass:"fas fa-long-arrow-alt-left mr-1"}),t._v("\n\t\t\t\t\t\t"+t._s(t.backLabel)+"\n\t\t\t\t\t")])],1):t._e(),t._v(" "),r("div",{staticClass:"card-body"},[t.title?r("h2",{staticClass:"card-title mb-4",domProps:{textContent:t._s(t.title)}}):t._e(),t._v(" "),t._t("default")],2),t._v(" "),r("div",{staticClass:"card-footer d-flex d-print-none justify-content-between"},[t._t("footer")],2)])],1)])])}),[],!1,null,"29e00fd0",null);e.default=component.exports;installComponents(component,{Card:r(419).default})},478:function(t,e,r){"use strict";r.r(e);r(19),r(18),r(15),r(10),r(22),r(16),r(23);var n=r(20),o=r(4),c=(r(82),r(28),r(49),r(311),r(41),r(44)),l=r(40),f=r(78),d=r(136);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={data:function(){return{apiKeyInput:""}},head:{title:"Connect to TORN"},beforeMount:function(){this.$store.state.settings.apiKey&&this.$router.replace("/log")},mounted:function(){var t;null===(t=this.$refs.apiKeyInput)||void 0===t||t.focus()},methods:v(v(v({},Object(c.b)("settings",["SET_API_KEY","SET_PLAYER_ID"])),Object(c.b)("ui",["SET_LOADING"])),{},{pasteApiKey:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.apiKeyInput.length){e.next=10;break}return e.prev=1,e.next=4,navigator.clipboard.readText();case 4:r=e.sent,t.isValidApiKey(r)&&(t.apiKeyInput=r),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})))()},isValidApiKey:function(t){return t.match(/[0-9A-Za-z]{16}/)},connect:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.SET_LOADING(!0),e.next=4,f.a.basic(t.apiKeyInput);case 4:if((r=e.sent).player_id&&r.name){e.next=7;break}throw new Error("Invalid response or API key.");case 7:return t.SET_API_KEY(t.apiKeyInput),t.SET_PLAYER_ID(r.player_id),e.next=11,l.d.addPlayers([{id:r.player_id,name:r.name}]);case 11:return e.next=13,d.a.updateAttacks();case 13:if(e.sent){e.next=15;break}t.errorToast("TORN API returned no attacks. See developer console (F12 -> Console tab) for error message.");case 15:t.$router.push("/log"),e.next=26;break;case 18:if(e.prev=18,e.t0=e.catch(0),t.apiKeyInput="",!e.t0.message){e.next=25;break}t.errorToast(e.t0.message),e.next=26;break;case 25:throw e.t0;case 26:return e.prev=26,t.SET_LOADING(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,18,26,29]])})))()}})},h=r(57),component=Object(h.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Screen",{attrs:{"show-back":"",title:"Connect to TORN"},scopedSlots:t._u([{key:"footer",fn:function(){return[r("b-button",{attrs:{href:"https://www.torn.com/preferences.php#tab=api?&step=addNewKey&title=TLL&type=3",target:"_blank",variant:"link"}},[r("i",{staticClass:"fas fa-plus mr-1"}),t._v("\n\t\t\tNew key\n\t\t")]),t._v(" "),r("b-button",{attrs:{disabled:!t.isValidApiKey(t.apiKeyInput),variant:"primary"},on:{click:t.connect}},[t._v("\n\t\t\tLog\n\t\t\t"),r("i",{staticClass:"fas fa-sign-in-alt ml-1"})])]},proxy:!0}])},[r("b-form-group",{attrs:{label:"Please enter your API key:"}},[r("b-form-input",{ref:"apiKeyInput",staticClass:"text-center",attrs:{placeholder:"Click to paste",size:"lg"},on:{click:t.pasteApiKey},model:{value:t.apiKeyInput,callback:function(e){t.apiKeyInput="string"==typeof e?e.trim():e},expression:"apiKeyInput"}})],1),t._v(" "),r("p",{staticClass:"text-justify"},[t._v("\n\t\tYou can find your API key(s) in your "),r("a",{attrs:{href:"https://www.torn.com/preferences.php#tab=api",target:"_blank"}},[t._v("TORN settings")]),t._v(".\n\t\t"),r("strong",[t._v("TLL")]),t._v(" needs a key with "),r("span",{staticClass:"font-weight-bold text-warning"},[t._v("Limited access")]),t._v(", you can create one using the link below.\n\t")])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Screen:r(423).default})}}]);