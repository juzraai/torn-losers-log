(window.webpackJsonp=window.webpackJsonp||[]).push([[25,6,18],{419:function(t,e,n){"use strict";n.r(e);var r=n(57),component=Object(r.a)({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"border-0 card shadow"},[t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},420:function(t,e,n){var content=n(422);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(154).default)("08d58d36",content,!0,{sourceMap:!1})},421:function(t,e,n){"use strict";n(420)},422:function(t,e,n){var r=n(153)(!1);r.push([t.i,"@media print{.container>.row>.col[data-v-29e00fd0]{flex:1;max-width:100%;width:100%}}",""]),t.exports=r},423:function(t,e,n){"use strict";n.r(e);var r={props:{backLabel:{type:String,default:"What is TLL?"},backTo:{type:String,default:"/"},showBack:{type:Boolean,default:!1},title:{type:String,default:""}}},c=(n(421),n(57)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col col-md-10 col-lg-8 col-xl-7 mx-auto"},[n("Card",[t.showBack?n("div",{staticClass:"card-header d-print-none py-1"},[n("b-button",{staticClass:"border-0",attrs:{size:"sm",to:t.backTo,variant:"link"}},[n("i",{staticClass:"fas fa-long-arrow-alt-left mr-1"}),t._v("\n\t\t\t\t\t\t"+t._s(t.backLabel)+"\n\t\t\t\t\t")])],1):t._e(),t._v(" "),n("div",{staticClass:"card-body"},[t.title?n("h2",{staticClass:"card-title mb-4",domProps:{textContent:t._s(t.title)}}):t._e(),t._v(" "),t._t("default")],2),t._v(" "),n("div",{staticClass:"card-footer d-flex d-print-none justify-content-between"},[t._t("footer")],2)])],1)])])}),[],!1,null,"29e00fd0",null);e.default=component.exports;installComponents(component,{Card:n(419).default})},480:function(t,e,n){"use strict";n.r(e);n(19),n(18),n(15),n(22),n(23);var r=n(20),c=n(4),o=(n(82),n(72),n(28),n(49),n(10),n(67),n(73),n(50),n(41),n(79),n(16),n(37),n(458)),l=n.n(o),d=n(459),v=n.n(d),f=n(475),_=n(44),m=n(40);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w={head:function(){return{title:this.attacks?"Invoice (".concat(this.invoiceId,")"):"Invoice"}},computed:k(k(k({},Object(_.c)("settings",["darkMode","playerId"])),Object(_.c)("ui",["censored"])),{},{attacks:function(){return this.$route.params.attacks},attacker:function(){var t;return this.role===m.c.ATTACKER?this.playerId:null===(t=this.attacks[0])||void 0===t?void 0:t.opponentId},defender:function(){var t;return this.role===m.c.DEFENDER?this.playerId:null===(t=this.attacks[0])||void 0===t?void 0:t.opponentId},firstAttack:function(){return this.attacks[this.attacks.length-1]},filename:function(){return"tll-invoice-".concat(this.invoiceId)},invoiceId:function(){return[this.attacker,this.defender,this.firstAttack.code.substr(0,3),this.lastAttack.code.substr(0,3)].join("-")},lastAttack:function(){return this.attacks[0]},result:function(){return this.$route.params.result===m.b.LOST?"Lost (or Timeout)":"Escape"},role:function(){return this.$route.params.role}}),beforeMount:function(){this.attacks&&this.attacks.length&&this.result&&this.role||this.$router.replace("/log")},methods:k(k({},Object(_.b)("settings",["SET_DARK_MODE"])),{},{exportJPG:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.darkMode)){e.next=5;break}return t.SET_DARK_MODE(!1),e.next=5,l()(500);case 5:return e.next=7,v.a.toJpeg(t.$refs.invoice,{bgcolor:"white",quality:.95,width:600});case 7:r=e.sent,n&&t.SET_DARK_MODE(n),(link=document.createElement("a")).download="".concat(t.filename,".jpg"),link.href=r,link.click();case 13:case"end":return e.stop()}}),e)})))()},exportXLSX:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,c,header,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t.attacker,t.defender],c={},e.next=4,Promise.all(n.map(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.d.getPlayer(e);case 2:n=t.sent,c[e]=n.name;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return header="No.|Timestamp (TCT)|Attack log link|Attacker|Defender|Result|Price".split("|").map((function(t){return{value:t,fontWeight:"bold"}})),data=[header],t.attacks.forEach((function(a,i){data.push([t.attacks.length-i,t.$timestamp(a.timestamp),"https://www.torn.com/loader.php?sid=attackLog&ID=".concat(a.code),"".concat(c[t.attacker]," [").concat(t.attacker,"]"),"".concat(c[t.defender]," [").concat(t.defender,"]"),t.result,a.price].map((function(t){return{value:t}})))})),e.next=9,Object(f.a)(data,{fileName:"".concat(t.filename,".xlsx"),sheet:"TLL Invoice ".concat(t.invoiceId)});case 9:case"end":return e.stop()}}),e)})))()}})},x=w,y=n(57),component=Object(y.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Screen",{attrs:{"back-label":"Back to log","back-to":"/log","show-back":"",title:"Invoice"},scopedSlots:t._u([{key:"footer",fn:function(){return[n("b-button",{attrs:{variant:"primary"},on:{click:t.exportXLSX}},[n("i",{staticClass:"fas fa-file-excel fa-fw mr-1"}),t._v(" "),n("span",{staticClass:"d-none d-sm-inline"},[t._v("Download in")]),t._v("\n\t\t\tXLSX\n\t\t")]),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:t.exportJPG}},[n("i",{staticClass:"fas fa-file-image fa-fw mr-1"}),t._v(" "),n("span",{staticClass:"d-none d-sm-inline"},[t._v("Download as")]),t._v("\n\t\t\tJPG\n\t\t")])]},proxy:!0}])},[t.attacks&&t.attacks.length&&t.result&&t.role?n("div",{ref:"invoice",staticClass:"row"},[n("div",{staticClass:"col-12"},[n("p",{staticClass:"small"},[n("strong",[t._v("Invoice ID:")]),t._v("\n\t\t\t\t"+t._s(t.censored?"000000-000000-abc-abc":t.invoiceId)+"\n\t\t\t")])]),t._v(" "),n("div",{staticClass:"col"},[n("dl",[n("dt",[t._v("Attacker")]),t._v(" "),n("dd",[n("Player",{attrs:{link:"",xid:t.attacker}})],1),t._v(" "),n("dt",[t._v("Defender")]),t._v(" "),n("dd",[n("Player",{attrs:{link:"",xid:t.defender}})],1),t._v(" "),n("dt",[t._v("Result")]),t._v(" "),n("dd",[t._v(t._s(t.result))])])]),t._v(" "),n("div",{staticClass:"col"},[n("dl",[n("dt",[t._v("Attack #1")]),t._v(" "),n("dd",[t._v(t._s(t.$timestamp(t.firstAttack.timestamp).replace(/^\w+ /,"")))]),t._v(" "),n("dt",[t._v("Attack #"+t._s(t.attacks.length))]),t._v(" "),n("dd",[t._v(t._s(t.$timestamp(t.lastAttack.timestamp).replace(/^\w+ /,"")))]),t._v(" "),n("dt",[t._v("Price")]),t._v(" "),n("dd",{staticClass:"font-weight-bold",class:t.lastAttack.paid?"text-success":"text-danger"},[t._v("\n\t\t\t\t\t$Â "+t._s(t.censored?"xxxM":t.$price(t.attacks.length*t.lastAttack.price))+"\n\t\t\t\t\t("+t._s(t.censored?"xxxk":t.$price(t.lastAttack.price))+"/ea)\n\t\t\t\t")])])]),t._v(" "),n("div",{staticClass:"col-12"},[n("dl",[n("dt",[t._v("TORN attack logs")]),t._v(" "),n("dd",[n("ul",{staticClass:"d-md-none list-unstyled"},t._l(t.attacks,(function(a,i){return n("li",{key:a.code,staticClass:"mb-1"},[n("strong",[t._v("#"+t._s(t.attacks.length-i))]),t._v("\n\t\t\t\t\t\t\t"+t._s(t.$timestamp(a.timestamp))+"\n\t\t\t\t\t\t\t"),n("br"),t._v(" "),n("a",{attrs:{href:"https://www.torn.com/loader.php?sid=attackLog&ID="+a.code,target:"_blank"}},[t._v(t._s(t.censored?"abcdef0123456789":a.code))])])})),0),t._v(" "),n("table",{staticClass:"d-none d-md-table table table-bordered table-sm table-striped",class:{"table-dark":t.darkMode}},[n("thead",[n("tr",[n("th",[t._v("#")]),t._v(" "),n("th",[t._v("Timestamp")]),t._v(" "),n("th",[t._v("Attack ID")])])]),t._v(" "),n("tbody",t._l(t.attacks,(function(a,i){return n("tr",{key:a.code},[n("td",{staticClass:"text-right"},[t._v(t._s(t.attacks.length-i))]),t._v(" "),n("td",[t._v(t._s(t.$timestamp(a.timestamp)))]),t._v(" "),n("td",[n("a",{attrs:{href:"https://www.torn.com/loader.php?sid=attackLog&ID="+a.code,target:"_blank"}},[t._v(t._s(t.censored?"abcdef012345678xxabcdef012345678":a.code))])])])})),0)]),t._v(" "),n("p",{staticClass:"small"},[t._v("\n\t\t\t\t\t\tAll displayed timestamps are in TORN City Time (TCT; same as UTC or GMT).\n\t\t\t\t\t")]),t._v(" "),n("p",{staticClass:"small"},[t._v("\n\t\t\t\t\t\tTORN attack logs can be accessed by navigating to\n\t\t\t\t\t\t"),n("br"),t._v("\n\t\t\t\t\t\thttps://www.torn.com/loader.php?sid=attackLog&ID=ATTACK_ID\n\t\t\t\t\t")]),t._v(" "),n("p",{staticClass:"border-top pt-2 small"},[t._v("\n\t\t\t\t\t\tGenerated via "),n("strong",[t._v("TLL (TORN City Losers' Log)")]),t._v(" developed by\n\t\t\t\t\t\t"),n("Player",{staticClass:"font-weight-bold",attrs:{link:"",xid:2413874}})],1)])])])]):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Player:n(310).default,Screen:n(423).default})}}]);