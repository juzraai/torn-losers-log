(window.webpackJsonp=window.webpackJsonp||[]).push([[0,6,12,13,14,15,16,17],{419:function(t,e,r){"use strict";r.r(e);var n=r(57),component=Object(n.a)({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"border-0 card shadow"},[t._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},424:function(t,e,r){var content=r(430);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(154).default)("1abc0f20",content,!0,{sourceMap:!1})},425:function(t,e,r){var content=r(432);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(154).default)("7123277c",content,!0,{sourceMap:!1})},427:function(t,e,r){"use strict";r.r(e);var n={props:{clickable:{type:Boolean,default:!1},grow:{type:Boolean,default:!1}}},o=(r(429),r(57)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"align-items-center border-right d-flex gap p-2 transitions",class:{clickable:t.clickable,"flex-grow-1":t.grow},on:{click:function(e){return t.$emit("click",e)},mouseenter:function(e){return t.$emit("mouseenter",e)},mouseleave:function(e){return t.$emit("mouseleave",e)}}},[t._t("default")],2)}),[],!1,null,"5d18924c",null);e.default=component.exports},429:function(t,e,r){"use strict";r(424)},430:function(t,e,r){var n=r(153)(!1);n.push([t.i,".border-right[data-v-5d18924c]:last-child{border:none!important}.clickable[data-v-5d18924c]{cursor:pointer}.clickable[data-v-5d18924c]:hover{background-color:rgba(0,0,0,.05)}",""]),t.exports=n},431:function(t,e,r){"use strict";r(425)},432:function(t,e,r){var n=r(153)(!1);n.push([t.i,".list-item-dropdown-toggle{background-color:transparent}",""]),t.exports=n},438:function(t,e,r){"use strict";r.r(e);r(19),r(18),r(15),r(10),r(22),r(16),r(23);var n=r(4),o=r(44);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var l={props:{attacks:{type:Array,default:function(){return[{paid:!1,price:0}]}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.c)("ui",["censored"]))},d=l,f=r(57),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{class:t.attacks[0].paid?"text-success":"text-danger"},[t.attacks[0].price?r("span",[r("strong",[t._v("$ "+t._s(t.censored?"xxxM":t.$price(t.attacks[0].price*t.attacks.length)))]),t._v(" "),t.attacks.length>1?r("span",[r("br",{staticClass:"d-none d-md-inline"}),t._v(" "),r("span",{staticClass:"d-none d-sm-inline"},[t._v("\n\t\t\t\t("+t._s(t.censored?"xxxk":t.$price(t.attacks[0].price))+"/ea)\n\t\t\t")])]):t._e()]):r("span",[r("span",{staticClass:"d-md-none"},[t._v(t._s(t.attacks[0].paid?"Paid":"Unpaid"))]),t._v(" "),r("span",{staticClass:"d-none d-sm-inline small"},[t._v("(no price set)")])])])}),[],!1,null,null,null);e.default=component.exports},439:function(t,e,r){"use strict";r.r(e);r(19),r(18),r(15),r(10),r(22),r(16),r(23);var n=r(4),o=r(44);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var l={props:{attacks:{type:Array,default:function(){return[{paid:0}]}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.c)("settings",["darkMode"]))},d=l,f=(r(431),r(57)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-dropdown",{attrs:{boundary:"viewport",dropleft:"","no-caret":"","toggle-class":"border-0 rounded-0 shadow-none list-item-dropdown-toggle",variant:t.darkMode?"dark":"light"},scopedSlots:t._u([{key:"button-content",fn:function(){return[r("i",{staticClass:"fas fa-ellipsis-v"})]},proxy:!0}])},[t._v(" "),r("b-dropdown-item-button",{on:{click:function(e){return t.$emit("openInvoice")}}},[t._v("\n\t\tOpen invoice\n\t")]),t._v(" "),r("b-dropdown-item-button",{on:{click:function(e){return t.$emit("setPrice")}}},[t._v("\n\t\tSet price\n\t")]),t._v(" "),t.attacks[0].paid?r("b-dropdown-item-button",{on:{click:function(e){return t.$emit("togglePaid")}}},[t._v("\n\t\tMark this and newer attacks"),r("br"),t._v("\n\t\tof this player as "),r("strong",{staticClass:"text-danger"},[t._v("unpaid")])]):r("b-dropdown-item-button",{on:{click:function(e){return t.$emit("togglePaid")}}},[t._v("\n\t\tMark this and older attacks"),r("br"),t._v("\n\t\tof this player as "),r("strong",{staticClass:"text-success"},[t._v("paid")])])],1)}),[],!1,null,null,null);e.default=component.exports},440:function(t,e,r){"use strict";r.r(e);var n={props:{attacks:{type:Array,default:function(){return[{paid:!1,price:0}]}}},data:function(){return{hover:!1}},computed:{tooltip:function(){return this.attacks[0].paid?'Mark this and newer attacks<br>of this player as <strong class="text-danger">unpaid</strong>':'Mark this and older attacks<br>of this player as <strong class="text-success">paid</strong>'}}},o=r(57),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("LogItemCell",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.left",modifiers:{html:!0,left:!0}}],staticClass:"lead px-lg-3",attrs:{clickable:"",title:t.tooltip},on:{click:function(e){return t.$emit("click",e)},mouseenter:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[t.attacks[0].paid&&!t.hover||!t.attacks[0].paid&&t.hover?r("i",{staticClass:"fas fa-check fa-fw text-success"}):t._e(),t._v(" "),!t.attacks[0].paid&&!t.hover||t.attacks[0].paid&&t.hover?r("i",{staticClass:"fas fa-times fa-fw text-danger"}):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LogItemCell:r(427).default})},451:function(t,e,r){"use strict";r.r(e);r(19),r(18),r(15),r(10),r(22),r(16),r(23);var n=r(4),o=(r(37),r(72),r(176)),c=r(44),l=r(40);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={data:function(){return{unpaid:0}},computed:f(f({},Object(c.c)("log",["lastUpdated","paid","result","role"])),{},{phrase:function(){var t=this.role===l.c.ATTACKER?"Outgoing":"Incoming",e=this.paid?"":"unpaid",r=this.result===l.b.LOST?"losses":"escapes";return"".concat(t," ").concat(e," ").concat(r)},updateTrigger:function(){return[this.result,this.role].join(";")}}),watch:{updateTrigger:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.unpaid=0,Object(o.b)((function(){return l.d.sumOfUnpaid(t.role,t.result)})).subscribe((function(e){t.unpaid=e}))}}},v=r(57),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex p-2 px-lg-3"},[r("div",{staticClass:"d-flex flex-column flex-grow-1 "},[r("strong",[t._v("\n\t\t\t"+t._s(t.phrase)+"\n\t\t\t"),t.unpaid?r("span",{staticClass:"d-md-none ml-2"},[r("span",{staticClass:"text-danger"},[t._v("$ "+t._s(t.$price(t.unpaid)))])]):t._e()]),t._v(" "),r("small",{staticClass:"text-muted"},[r("span",{staticClass:"d-none d-md-inline"},[t._v("updated")]),t._v(" "),r("timeago",{attrs:{"auto-update":10,datetime:t.lastUpdated}})],1)]),t._v(" "),t.unpaid?r("div",{staticClass:"d-none d-md-block font-weight-bold text-danger"},[t._v("\n\t\t$ "+t._s(t.$price(t.unpaid))+"\n\t")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},452:function(t,e,r){"use strict";r.r(e);r(19),r(18),r(15),r(10),r(22),r(16),r(23);var n=r(20),o=r(4),c=(r(82),r(37),r(44)),l=r(40);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:{attacks:{type:Array,default:function(){return[]}}},data:function(){return{priceInput:0}},computed:f(f(f({},Object(c.c)("log",["group","result","role"])),Object(c.c)("settings",["darkMode"])),{},{isAttacker:function(){return this.role===l.c.ATTACKER},isEvent:function(){return this.group===l.a.EVENT},phrase:function(){var t=this.result===l.b.LOST?"lost to":"escaped from";return this.role===l.c.ATTACKER?"You ".concat(t):"".concat(t," you")},priceModalPhrase:function(){var t=this.role===l.c.ATTACKER?"outgoing":"incoming",e=this.result===l.b.LOST?"losses":"escapes";return"".concat(t," ").concat(e)}}),methods:f(f({},Object(c.b)("ui",["SET_LOADING"])),{},{initializePriceModal:function(){this.priceInput=this.attacks[0].price?this.attacks[0].price/1e3:null},markPaidUntil:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.SET_LOADING(!0),e.next=3,l.d.markPaidUntil(t.role,t.result,t.attacks);case 3:t.$emit("attacksUpdated"),t.SET_LOADING(!1);case 5:case"end":return e.stop()}}),e)})))()},markUnpaidFrom:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.SET_LOADING(!0),e.next=3,l.d.markUnpaidFrom(t.role,t.result,t.attacks);case 3:t.$emit("attacksUpdated"),t.SET_LOADING(!1);case 5:case"end":return e.stop()}}),e)})))()},openInvoice:function(){this.$router.push({name:"invoice",params:{attacks:this.attacks,result:this.result,role:this.role}})},togglePaid:function(){this.attacks[0].paid?this.markUnpaidFrom():this.markPaidUntil()},updatePrices:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=1e3*Math.max(0,t.priceInput),t.attacks[0].price===r){e.next=7;break}return t.SET_LOADING(!0),e.next=5,l.d.setPriceFrom(t.role,t.result,t.attacks,r);case 5:t.$emit("attacksUpdated"),t.SET_LOADING(!1);case 7:case"end":return e.stop()}}),e)})))()}})},v=r(57),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.attacks[0]?r("div",[r("div",{staticClass:"d-flex d-md-none flex-grow-1"},[r("LogItemCell",{attrs:{grow:""}},[r("div",{staticClass:"d-flex flex-column"},[r("div",{staticClass:"font-weight-bold"},[t.isEvent?t._e():r("span",[t._v(t._s(t.attacks.length)+"x")]),t._v(" "),r("Player",{attrs:{link:"",xid:t.attacks[0].opponentId}})],1),t._v(" "),r("div",{staticStyle:{"font-size":"90%"}},[r("span",{staticClass:"d-sm-none text-muted"},[t._v(t._s(t.$timestamp(t.attacks[0].timestamp).replace(/^\w+ |\/\d+$/g,""))+" |")]),t._v(" "),r("span",{staticClass:"d-none d-sm-inline text-muted"},[t._v(t._s(t.$timestamp(t.attacks[0].timestamp))+" |")]),t._v(" "),r("LogItemPrice",{attrs:{attacks:t.attacks}})],1)])]),t._v(" "),r("LogItemDropdown",{attrs:{attacks:t.attacks},on:{openInvoice:t.openInvoice,setPrice:function(e){return t.$refs.priceModal.show()},togglePaid:t.togglePaid}})],1),t._v(" "),r("div",{staticClass:"d-none d-md-flex flex-grow-1"},[r("LogItemCell",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.right",modifiers:{right:!0}}],attrs:{clickable:"",title:"Open invoice"},on:{click:t.openInvoice}},[t.isEvent?t._e():r("div",{staticClass:"font-weight-bold lead text-right",staticStyle:{"min-width":"45px"},domProps:{textContent:t._s(t.attacks.length+"x")}}),t._v(" "),r("div",{staticClass:"d-flex flex-column text-muted",staticStyle:{"min-width":"200px"}},[r("div",[t._v(t._s(t.$timestamp(t.attacks[0].timestamp)))]),t._v(" "),t.attacks.length>1?r("div",[t._v("\n\t\t\t\t\t"+t._s(t.$timestamp(t.attacks[t.attacks.length-1].timestamp))+"\n\t\t\t\t")]):t._e()])]),t._v(" "),r("LogItemCell",{attrs:{grow:""}},[r("div",{staticClass:"d-flex",class:t.isAttacker?"flex-column":"flex-column-reverse"},[r("div",[t._v(t._s(t.phrase))]),t._v(" "),r("Player",{staticClass:"font-weight-bold",attrs:{link:"",xid:t.attacks[0].opponentId}})],1)]),t._v(" "),r("LogItemCell",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.left",modifiers:{left:!0}}],attrs:{clickable:"",title:"Set price"},on:{click:function(e){return t.$refs.priceModal.show()}}},[r("LogItemPrice",{staticClass:"text-right",staticStyle:{"min-width":"100px"},attrs:{attacks:t.attacks}})],1),t._v(" "),r("LogItemPaidButton",{attrs:{attacks:t.attacks},on:{click:t.togglePaid}})],1),t._v(" "),r("b-modal",{ref:"priceModal",attrs:{centered:"","footer-class":"d-flex justify-content-between py-2","header-class":"py-2","modal-class":t.darkMode?"dark":null,"ok-disabled":1e3*t.priceInput===t.attacks[0].price,size:"sm",title:"Set price"},on:{ok:t.updatePrices,shown:t.initializePriceModal},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.ok;return[r("p",{staticClass:"text-justify"},[t._v("\n\t\t\t\tSpecify a new price for\n\t\t\t\t"+t._s(t.priceModalPhrase)+"\n\t\t\t\tof\n\t\t\t\t"),r("Player",{staticClass:"font-weight-bold",attrs:{xid:t.attacks[0].opponentId}}),t._v("\n\t\t\t\tstarting\n\t\t\t\t"),r("strong",[t._v("\n\t\t\t\t\tfrom\n\t\t\t\t\t"+t._s(t.$timestamp(t.attacks[t.attacks.length-1].timestamp))+".\n\t\t\t\t")])],1),t._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),n.apply(null,arguments)}}},[r("b-form-group",[r("b-input-group",{attrs:{append:"k",prepend:"$",size:"lg"}},[r("b-form-input",{staticClass:"text-center",attrs:{autofocus:"",max:"9999",min:"0",placeholder:"0",step:"10",type:"number"},model:{value:t.priceInput,callback:function(e){t.priceInput=e},expression:"priceInput"}})],1)],1)],1),t._v(" "),1e3*t.priceInput!==t.attacks[0].price?r("p",{staticClass:"text-danger text-justify"},[t._v("Prices of similar and newer attacks will be "),r("strong",[t._v("overwritten!")])]):t._e()]}}],null,!1,4028260568)})],1):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Player:r(310).default,LogItemPrice:r(438).default,LogItemCell:r(427).default,LogItemDropdown:r(439).default,LogItemPaidButton:r(440).default})},473:function(t,e,r){"use strict";r.r(e);r(19),r(18),r(15),r(10),r(22),r(16),r(23);var n=r(20),o=r(4),c=(r(82),r(72),r(54),r(44)),l=r(40);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={data:function(){return{items:[],limit:10}},computed:f(f(f(f({},Object(c.c)("log",["group","lastUpdated","paid","result","role"])),Object(c.c)("settings",["listLimit"])),Object(c.c)("ui",["loading"])),{},{notFoundMessage:function(){var t=this.result===l.b.LOST?"lost to":"escaped from";return this.role===l.c.ATTACKER?"You haven't ".concat(t," anyone recently."):"Nobody has ".concat(t," you recently.")},thingsThatTriggerUpdate:function(){return[this.group,this.lastUpdated,this.paid,this.result,this.role].join(";")}}),watch:{limit:function(t,e){t<e?this.items=this.items.slice(0,t):this.query()},thingsThatTriggerUpdate:function(){this.query()}},mounted:function(){this.limit=this.listLimit,this.query()},methods:f(f({},Object(c.b)("ui",["SET_LOADING"])),{},{query:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.SET_LOADING(!0),e.next=3,l.d.queryAttacks(t.role,t.result,t.paid,t.group,t.limit);case 3:t.items=e.sent,t.SET_LOADING(!1);case 5:case"end":return e.stop()}}),e)})))()}})},v=r(57),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",[r("div",{staticClass:"card-header p-0"},[r("LogListHeader")],1),t._v(" "),r("ul",{staticClass:"list-group list-group-flush"},[t.items.length?t._l(t.items,(function(e){return r("li",{key:e[0].code+"/"+e[0].session,staticClass:"list-group-item p-0"},[r("LogListItem",{attrs:{attacks:e},on:{attacksUpdated:t.query}})],1)})):r("li",{staticClass:"list-group-item"},[t._v("\n\t\t\t"+t._s(t.notFoundMessage)+"\n\t\t")])],2),t._v(" "),r("div",{staticClass:"border-top card-footer d-flex d-print-none justify-content-center py-2"},[t.limit>10?r("b-button",{staticClass:"mx-3",attrs:{variant:"link"},domProps:{textContent:t._s("-10 entry")},on:{click:function(e){t.limit-=10}}}):t._e(),t._v(" "),t.items.length===t.limit?r("b-button",{staticClass:"mx-3",attrs:{variant:"link"},domProps:{textContent:t._s("+10 entry")},on:{click:function(e){t.limit+=10}}}):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LogListHeader:r(451).default,LogListItem:r(452).default,Card:r(419).default})}}]);